{
  "input_images_format":"fit",
  "psfex_config_file_name":"default.psfex",
  "observation_id":"GRB130427",
  "scamp_required_catalog_params":[
    "NUMBER",
    "EXT_NUMBER",
    "XWIN_IMAGE",
    "YWIN_IMAGE",
    "AWIN_IMAGE",
    "BWIN_IMAGE",
    "ERRAWIN_IMAGE",
    "ERRBWIN_IMAGE",
    "ERRTHETAWIN_IMAGE",
    "ERRA_WORLD",
    "ERRB_WORLD",
    "ERRTHETA_WORLD",
    "XWIN_WORLD",
    "YWIN_WORLD",
    "X_WORLD",
    "Y_WORLD",
    "FLUX_AUTO",
    "FLUX_MAX",
    "FLUX_RADIUS",
    "FLUXERR_AUTO",
    "MAG_AUTO",
    "MAGERR_AUTO",
    "FLAGS",
    "ELONGATION"
  ],
  "pipeline_stages":{
    "preparation":{
      "stage_steps":{},
      "next_stage":"images_calibration",
      "previous_stage":"none",
      "stage_params":{
        "input_params":{
          "output_from_stages":[]
        },
        "stage_mapred_type":"none",
        "output_params":{
          "input_for_stages":[
            "images_calibration"
          ]
        }
      }
    },
    "images_calibration":{
      "stage_steps":{
        "create_calibration_headers":{
          "previous_step":"create_calibration_catalogs",
          "step_params":{
            "input_params":{
              "output_from_steps":[
                "create_calibration_catalogs"
              ]
            },
            "data_handle":{},
            "software_params":{
              "config":{
                "ASTREF_BAND":"DEFAULT",
                "COMPUTE_PARALLAXES":"N",
                "MOSAIC_TYPE":"UNCHANGED",
                "SN_THRESHOLDS":"10.0,100.0",
                "CHECKPLOT_DEV":"NULL",
                "SOLVE_ASTROM":"Y",
                "ASTREF_CATALOG":"UCAC-3",
                "EXPOTIME_KEY":"EXPTIME",
                "PIXSCALE_MAXERR":"1.2",
                "FWHM_THRESHOLDS":"0.0,10.0",
                "STABILITY_TYPE":"INSTRUMENT",
                "SOLVE_PHOTOM":"Y",
                "CROSSID_RADIUS":"3.0"
              },
              "code":"SCAMP",
              "config_file":"default.scamp",
              "temp_path":"temp"
            },
            "output_params":{
              "calculate_calibration_separately":"true",
              "input_for_steps":[
                "calibrate_images"
              ]
            },
            "basic_function":"calculate_calibration"
          },
          "next_step":"calibrate_images"
        },
        "basic_reduction":{
          "previous_step":"none",
          "step_params":{
            "input_params":{
              "output_from_steps":[]
            },
            "data_handle":{},
            "software_params":{
              "config":{},
              "code":"IRAF",
              "config_file":"login.cl",
              "temp_path":"temp"
            },
            "output_params":{
              "input_for_steps":[
                "create_calibration_catalogs"
              ]
            },
            "basic_function":"none"
          },
          "next_step":"create_calibration_catalogs"
        },
        "create_calibrated_images_catalogs":{
          "previous_step":"calibrate_images",
          "step_params":{
            "input_params":{
              "images_dir":"images",
              "images_format":"fits",
              "output_from_steps":[
                "calibrate_images"
              ]
            },
            "data_handle":{
              "params_from_fits_header":{
                "GAIN":"GAIN"
              }
            },
            "software_params":{
              "config":{
                "FILTER":"Y",
                "CATALOG_TYPE":"FITS_LDAC",
                "DETECT_THRESH":"3",
                "ANALYSIS_THRESH":"3",
                "FILTER_NAME":"gauss_4.0_7x7.conv"
              },
              "code":"SExtractor",
              "config_file":"default.sex",
              "temp_path":"temp",
              "params":[
                "NUMBER",
                "EXT_NUMBER",
                "XWIN_IMAGE",
                "YWIN_IMAGE",
                "AWIN_IMAGE",
                "BWIN_IMAGE",
                "ERRAWIN_IMAGE",
                "ERRBWIN_IMAGE",
                "ERRTHETAWIN_IMAGE",
                "ERRA_WORLD",
                "ERRB_WORLD",
                "ERRTHETA_WORLD",
                "X_WORLD",
                "Y_WORLD",
                "XWIN_WORLD",
                "YWIN_WORLD",
                "FLUX_AUTO",
                "FLUX_MAX",
                "MAG_AUTO",
                "FLUXERR_AUTO",
                "FLAGS",
                "FLUX_RADIUS",
                "ELONGATION"
              ]
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"cat",
              "input_for_steps":[
                "model_psf_calibrated_images_catalogs"
              ]
            },
            "basic_function":"create_catalogs"
          },
          "next_step":"model_psf_calibrated_images_catalogs"
        },
        "calibrate_images":{
          "previous_step":"create_calibration_headers",
          "step_params":{
            "input_params":{
              "images_dir":"temp",
              "images_format":"fit",
              "output_from_steps":[
                "basic_reduction,create_calibration_headers"
              ]
            },
            "data_handle":{},
            "software_params":{
              "config":{
                "CELESTIAL_TYPE":"NATIVE",
                "RESAMPLE_SUFFIX":".resamp.fits",
                "RESAMPLE":"N",
                "PROJECTION_TYPE":"NONE",
                "COMBINE":"Y",
                "RESAMPLE_DIR":"images",
                "DELETE_TMPFILES":"N"
              },
              "code":"SWarp",
              "config_file":"default.swarp",
              "temp_path":"temp"
            },
            "output_params":{
              "images_dir":"images",
              "images_format":"fits",
              "swarp_separately":"true",
              "weightmaps_format":"weight.fits",
              "weightmaps_dir":"images",
              "input_for_steps":[
                "create_calibrated_images_catalogs,create_calibrated_images_catalogs_psf"
              ]
            },
            "basic_function":"swarp_images"
          },
          "next_step":"create_calibrated_images_catalogs"
        },
        "model_psf_calibrated_images_catalogs":{
          "previous_step":"create_calibrated_images_catalogs",
          "step_params":{
            "input_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"cat",
              "output_from_steps":[
                "create_calibrated_images_catalogs"
              ]
            },
            "data_handle":{},
            "software_params":{
              "config":{},
              "code":"PSFEx",
              "config_file":"default.psfex",
              "temp_path":"temp"
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"psf",
              "input_for_steps":[
                "create_calibrated_images_catalogs_psf"
              ]
            },
            "basic_function":"calculate_psf"
          },
          "next_step":"create_calibrated_images_catalogs_psf"
        },
        "create_calibration_catalogs":{
          "previous_step":"basic_reduction",
          "step_params":{
            "input_params":{
              "images_dir":"temp",
              "images_format":"fit",
              "output_from_steps":[
                "basic_reduction"
              ]
            },
            "data_handle":{
              "params_from_fits_header":{
                "GAIN":"GAIN"
              }
            },
            "software_params":{
              "config":{
                "FILTER":"Y",
                "CATALOG_TYPE":"FITS_LDAC",
                "DETECT_THRESH":"5",
                "ANALYSIS_THRESH":"5",
                "FILTER_NAME":"gauss_4.0_7x7.conv"
              },
              "code":"SExtractor",
              "config_file":"default.sex",
              "temp_path":"temp",
              "params":[
                "NUMBER",
                "EXT_NUMBER",
                "XWIN_IMAGE",
                "YWIN_IMAGE",
                "AWIN_IMAGE",
                "BWIN_IMAGE",
                "ERRAWIN_IMAGE",
                "ERRBWIN_IMAGE",
                "ERRTHETAWIN_IMAGE",
                "FLUX_AUTO",
                "FLUX_MAX",
                "MAG_AUTO",
                "FLUXERR_AUTO",
                "FLAGS",
                "FLUX_RADIUS",
                "ELONGATION"
              ]
            },
            "output_params":{
              "check_params_for_scamp_required":"true",
              "catalogs_dir":"temp",
              "catalogs_format":"cat",
              "input_for_steps":[
                "create_calibration_headers"
              ]
            },
            "basic_function":"create_catalogs"
          },
          "next_step":"create_calibration_headers"
        },
        "create_calibrated_images_catalogs_psf":{
          "previous_step":"model_psf_calibrated_images_catalogs",
          "step_params":{
            "input_params":{
              "images_dir":"images",
              "images_format":"fits",
              "output_from_steps":[
                "calibrate_images,model_psf_calibrated_images_catalogs"
              ]
            },
            "data_handle":{
              "params_from_fits_header":{
                "GAIN":"GAIN"
              }
            },
            "software_params":{
              "config":{},
              "code":"SExtractor",
              "config_file":"default.sex",
              "temp_path":"temp",
              "params":[]
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"psf.cat",
              "input_for_steps":[]
            },
            "basic_function":"create_catalogs"
          },
          "next_step":"none"
        }
      },
      "next_stage":"images_coaddition",
      "previous_stage":"preparation",
      "stage_params":{
        "input_params":{
          "output_from_stages":[
            "preparation"
          ]
        },
        "stage_mapred_type":"map",
        "output_params":{
          "input_for_stages":[
            "images_coaddition"
          ]
        }
      }
    },
    "images_coaddition":{
      "stage_steps":{
        "model_psf_coadded_image_catalog":{
          "previous_step":"create_coadded_image_catalog",
          "data_handle":{},
          "step_params":{
            "input_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"coaded.cat",
              "output_from_steps":[
                "create_coadded_image_catalog"
              ]
            },
            "software_params":{
              "config":{},
              "code":"PSFEx",
              "config_file":"default.psfex",
              "temp_path":"temp"
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"coaded.psf",
              "input_for_steps":[
                "create_coadded_image_catalog_psf"
              ]
            },
            "basic_function":"calculate_psf"
          },
          "next_step":"create_coadded_image_catalog_psf"
        },
        "coadd_calibrated_images":{
          "previous_step":"none",
          "data_handle":{},
          "step_params":{
            "input_params":{
              "images_dir":"images",
              "images_format":"fits",
              "output_from_steps":[]
            },
            "software_params":{
              "config":{
                "CELESTIAL_TYPE":"NATIVE",
                "RESAMPLE_SUFFIX":".resamp.fits",
                "RESAMPLE":"N",
                "PROJECTION_TYPE":"NONE",
                "COMBINE":"Y",
                "RESAMPLE_DIR":"temp",
                "DELETE_TMPFILES":"Y",
                "COMBINE_TYPE":"MEDIAN"
              },
              "code":"SWarp",
              "config_file":"default.swarp",
              "temp_path":"temp"
            },
            "output_params":{
              "weightmaps_format":"weight.fits",
              "images_dir":"stacks",
              "weightmaps_dir":"stacks",
              "images_format":"fits",
              "input_for_steps":[
                "create_coadded_image_catalog,create_coadded_image_catalog_psf"
              ]
            },
            "basic_function":"swarp_images"
          },
          "next_step":"create_coadded_image_catalog"
        },
        "create_coadded_image_catalog":{
          "previous_step":"coadd_calibrated_images",
          "step_params":{
            "input_params":{
              "images_dir":"stacks",
              "images_format":"fits",
              "output_from_steps":[
                "coadd_calibrated_images"
              ]
            },
            "data_handle":{
              "params_from_fits_header":{
                "GAIN":"GAIN"
              }
            },
            "software_params":{
              "config":{
                "FILTER":"N",
                "CATALOG_TYPE":"FITS_LDAC",
                "DETECT_THRESH":"3",
                "ANALYSIS_THRESH":"3",
                "FILTER_NAME":"gauss_4.0_7x7.conv"
              },
              "code":"SExtractor",
              "config_file":"default.sex",
              "temp_path":"temp",
              "params":[
                "NUMBER",
                "EXT_NUMBER",
                "XWIN_IMAGE",
                "YWIN_IMAGE",
                "AWIN_IMAGE",
                "BWIN_IMAGE",
                "ERRAWIN_IMAGE",
                "ERRBWIN_IMAGE",
                "ERRTHETAWIN_IMAGE",
                "ERRA_WORLD",
                "ERRB_WORLD",
                "ERRTHETA_WORLD",
                "X_WORLD",
                "Y_WORLD",
                "XWIN_WORLD",
                "YWIN_WORLD",
                "FLUX_AUTO",
                "FLUX_MAX",
                "MAG_AUTO",
                "FLUXERR_AUTO",
                "FLAGS",
                "FLUX_RADIUS",
                "ELONGATION"
              ]
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"coadded.cat",
              "input_for_steps":[
                "model_psf_coadded_image_catalog"
              ]
            },
            "basic_function":"create_catalogs"
          },
          "next_step":"model_psf_coadded_image_catalog"
        },
        "create_coadded_image_catalog_psf":{
          "previous_step":"model_psf_coadded_image_catalog",
          "data_handle":{},
          "step_params":{
            "input_params":{
              "images_dir":"stacks",
              "images_format":"fits",
              "output_from_steps":[
                "model_psf_coadded_image_catalog,coadd_calibrated_images"
              ]
            },
            "data_handle":{
              "params_from_fits_header":{
                "GAIN":"GAIN"
              }
            },
            "software_params":{
              "config":{},
              "code":"SExtractor",
              "config_file":"default.sex",
              "temp_path":"temp",
              "params":[]
            },
            "output_params":{
              "catalogs_dir":"catalogs",
              "catalogs_format":"psf.coadded.cat",
              "input_for_steps":[]
            },
            "basic_function":"create_catalogs"
          },
          "next_step":"none"
        }
      },
      "next_stage":"none",
      "previous_stage":"images_calibration",
      "stage_params":{
        "input_params":{
          "output_from_stages":[
            "images_calibration"
          ]
        },
        "stage_mapred_type":"reduce",
        "output_params":{
          "input_for_stages":[]
        }
      }
    }
  },
  "scamp_config_file_name":"default.scamp",
  "sex_config_file_name":"default.sex",
  "input_tech_frames_format":"fit",
  "swarp_config_file_name":"default.swarp"
}